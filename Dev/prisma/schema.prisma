generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model disponibilidade_lideranca {
  id             Int       @id(map: "pk_disponibilidade_lideranca") @default(autoincrement())
  id_lideranca   Int?
  mes_referencia String    @db.VarChar(20)
  qtd_max_missas Int
  lideranca      lideranca @relation(fields: [id], references: [id], onUpdate: Restrict, map: "fk_disponibilidade_lideranca")

  @@index([id], map: "fki_d")
}

model lideranca {
  id                        Int                        @id(map: "pk_lideranca") @default(autoincrement())
  nome                      String                     @db.VarChar(100)
  contato                   String?                    @db.VarChar(20)
  id_pastoral               Int?
  data_nascimento           DateTime?                  @db.Date
  disponibilidade_lideranca disponibilidade_lideranca?
  pastoral                  pastoral?                  @relation(fields: [id_pastoral], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_lideranca")
  lideranca_missa           lideranca_missa[]
  registro_escala           registro_escala[]
}

model lideranca_missa {
  id_missa     Int
  id_lideranca Int
  lideranca    lideranca @relation(fields: [id_lideranca], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_id_lideranca")
  missa        missa     @relation(fields: [id_missa], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_id_missa")

  @@id([id_missa, id_lideranca])
}

model missa {
  id                 Int               @id(map: "pk_missa") @default(autoincrement())
  data_hora          DateTime          @db.Timestamp(6)
  qtd_min_liderancas Int
  descricao          String?           @db.VarChar(200)
  titulo             String?           @db.VarChar(200)
  lideranca_missa    lideranca_missa[]
  registro_escala    registro_escala[]
}

model pastoral {
  id        Int         @id(map: "pk_pastoral") @default(autoincrement())
  nome      String      @db.VarChar(100)
  lideranca lideranca[]
}

model registro_escala {
  id_missa     Int
  id_lideranca Int
  lideranca    lideranca @relation(fields: [id_lideranca], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_registro_escala_lideranca")
  missa        missa     @relation(fields: [id_missa], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_registro_escala_missa")

  @@id([id_missa, id_lideranca], map: "pk_registro_escala")
}
